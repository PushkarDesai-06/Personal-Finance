<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="../node_modules/apexcharts/dist/apexcharts.css"
    />
    <link rel="stylesheet" href="../node_modules/flatpickr/dist/flatpickr.css" />
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="output.css" />
  </head>
  <body >
    <!--! Navbar -->
    <nav
      class="navbar rounded-box lg:max-w-screen-lg mx-auto my-4 border max-w-[90%] border-neutral-600 border-t-0 mt-0 rounded-tl-none rounded-tr-none bg-transparent backdrop-brightness-75 shadow-sm"
    >
      <div class="w-full md:flex md:items-center md:gap-2">
        <div class="flex items-center justify-between">
          <div class="navbar-start items-center justify-between max-md:w-full">
            <a href="#" aria-label="Homepage Link">
              <i class="fa-solid fa-wallet scale-150"></i>
            </a>
            <div class="md:hidden">
              <button
                type="button"
                i
                class="collapse-toggle btn btn-outline btn-secondary btn-sm btn-square"
                data-collapse="#logo-navbar-collapse"
                aria-controls="logo-navbar-collapse"
                aria-label="Toggle navigation"
              >
                <span
                  class="icon-[tabler--menu-2] collapse-open:hidden size-4"
                ></span>
                <span
                  class="icon-[tabler--x] collapse-open:block hidden size-4"
                ></span>
              </button>
            </div>
          </div>
        </div>
        <div
          id="logo-navbar-collapse"
          class="md:navbar-end collapse hidden grow basis-full overflow-hidden transition-[height] duration-300 max-md:w-full"
        >
          <ul class="menu md:menu-horizontal gap-2 p-0 text-base max-md:mt-2 bg-transparent ">
            <li><a href="./Index.html">Expenses</a></li>
            <li><a href="./CurrencyConverter.html">Curreny Converter</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!--! END Navbar !-->

    <!--! Main -->

    <main
      class="sm:grid sm:grid-cols-2 sm:grid-rows-2 gap-4 mx-auto lg:max-w-screen-lg max-w-[90%] mb-8 grid-cols-1 grid-rows-3 flex flex-col"
    >
      <div class="sm:row-span-2 border border-neutral-600 sm:h-full sm:w-auto flex flex-col gap-10 rounded-xl backdrop-brightness-75 shadow-xl z-[80]">
        <div
          class="h-[100px] border-b border-neutral-800 rounded-xl rounded-b-none flex items-center justify-center relative"
        >
          <h1 class="text-3xl text-neutral-300 text-center">Expenses</h1>
          <!--? Date -->
          <div
            class="absolute bottom-[-25%] p-2 px-4 flex justify-between gap-4 rounded-lg shadow-md shadow-black backdrop-blur-lg border-accent text-white"
            id="date-container"
          >
            <div class="justify-self-start">
              <button
                class="cursor-pointer"
                id="dateBack"
                onclick="changeDateBack()"
              >
                <i class="fa-solid fa-caret-left transition hover:scale-125"></i>
                
              </button>
            </div>
            <p class="cursor-default" id="dateToday">0000-00-00</p>
            <div class="justify-self">
              <button
                class="cursor-pointer"
                id="dateForward"
                onclick="changeDateForward()"
                >
                <i class="fa-solid fa-caret-right transition hover:scale-125"></i>
              </button>
            </div>
          </div>
          <!--? Date  -->
        </div>
        <div id="expenses" class="h-[560px] rounded-xl rounded-t-none">
          <div class="flex justify-between items-center p-4 w-[90%] mx-auto">
            <h2 class="text-xl">Expenses</h2>
            <button class="btn btn-primary btn-sm" aria-haspopup="dialog" aria-expanded="false" aria-controls="basic-modal" data-overlay="#basic-modal">
              Add Expense
            </button>

            <div id="basic-modal" class="overlay modal overlay-open:opacity-100 max-w-[450px] mx-auto hidden" role="dialog" tabindex="-1">
              <div class="modal-dialog overlay-open:opacity-100">
                <form action="" id="addExpensesForm">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h3 class="modal-title">Add Expense</h3>
                      <button type="button" class="btn btn-text btn-circle btn-sm absolute end-3 top-3" aria-label="Close" data-overlay="#basic-modal" >
                        <span class="icon-[tabler--x] size-4"></span>
                      </button>
                    </div>
                    <div class="modal-body flex flex-col gap-1">
                      <!--* Name Input  -->
                      <div class="sm:w-96">
                        <label class="label label-text" for="inputName"> Expense </label>
                        <input type="text"  class="input" placeholder="Describe your expense in short" id="inputName"/>
                      </div>
                      <!--* Name Input  -->
                      <!--? Date Input -->
                      <label for="flatpickr-date" class="mt-3">Date</label>
                      <input type="text" class="input max-w-sm mb-3" placeholder="YYYY-MM-DD" id="flatpickr-date" aria-required="true"/>
                      <!--?END Date Input -->
                      <!--* Amount Input  -->
                      <label class="label label-text" for="number-input-label">Amount:</label>

                      <div class="input-group max-w-sm" data-input-number>
                        <input class="input" id="number-input-label" type="text" value="0" data-input-number-input required/>
                        <span class="input-group-text gap-3">
                          <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0" aria-label="Decrement button" data-input-number-decrement>
                            <span class="icon-[tabler--minus] size-3.5 flex-shrink-0"></span>
                          </button>
                          <button type="button" class="btn btn-primary btn-soft size-[22px] rounded min-h-0 p-0" aria-label="Increment button" data-input-number-increment>
                            <span class="icon-[tabler--plus] size-3.5 flex-shrink-0"></span>
                          </button>
                        </span>
                      </div>
                      <!--* Amount Input  -->

                      <!--?Modal Body  -->
                    </div>
                    <div class="modal-footer">
                      <!--! Close button -->
                      <button type="button" class="btn btn-soft btn-secondary" data-overlay="#basic-modal">Close</button>
                      <!--! Add Expense button -->
                      <button type="submit" class="btn btn-primary" id="addExpensesFinal">Add Expense</button>
                    </div>
                  </div> <!-- closing modal-content -->
                </form>
              </div>
            </div>


          </div>
          <div class="overflow-y-auto h-[500px]">
            <!--? Imported Table -->
            <div class="w-[90%] mx-auto rounded-lg pb-2 mt-4">
              <div class="overflow-x-auto">
                <table class="table" id="expensesTable">
                  <thead>
                    <tr class="bg-base-300 border-0">
                      <th class="rounded-s-lg w-[40%]">Name</th>
                      <th class="w-[20%] text-center">Price</th>
                      <th class="rounded-e-lg w-[40%] text-right">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="tableBody" >
                    <!--? Tr Component -->
                    <tr id="expense-component" data-value="0" >
                      <td class="text-nowrap">Food</td>
                      <td class="text-center">300</td>
                      <td class="flex justify-end">
                        <button
                          class="btn btn-circle btn-text btn-sm"
                          aria-label="Action button"
                        >
                          <span class="icon-[tabler--pencil] size-5"></span>
                        </button>
                        <button
                          class="btn btn-circle btn-text btn-sm"
                          aria-label="Action button"
                          onclick="deleteExpense(this)"
                        >
                          <span class="icon-[tabler--trash] size-5"></span>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- !Imported table end -->
          </div>
        </div>
      </div>
      <div class="border rounded-xl p-4 flex flex-col sm:h-auto h-auto backdrop-brightness-75 border-neutral-600 shadow-xl">
        <!--! Add chart -->
        <div>
            <h1 class="text-xl text-center">Your <span class="font text-purple-500" style="font-family: Verdana, Geneva, Tahoma, sans-serif, Tahoma, Geneva, Verdana, sans-serif;">expenses</span></h1>
          <p class="text-center font-bold">Graphed</p>
        </div>

        <!-- <div id="apex-multiple-area-charts-compare-alt" class="w-full"></div> -->
         <div id="ApexChartDiv"></div>

        
      </div>
      <div class="sm:col-start-2 col-start-1 sm:row-start-2 border rounded-xl p-4 backdrop-brightness-75 border-neutral-600 shadow-xl">
        <!-- !Chatbot -->
        <div class="flex flex-col h-full relative ">
          <h2 class="text-xl text-center absolute left-1/2 -translate-x-1/2 -translate-y-7 p-2 border-accent border px-4 rounded-lg bg-gray-900">
            Suggestions
          </h2>
          <div id="chat-messages" 
          class="h-[400px] overflow-y-auto mb-4 overflow-x-hidden text-wrap p-4 border border-accent rounded-xl scrollbar-thin">
          </div>
          <div class="mt-auto flex">
            <input
              id="chat-input"
              type="text"
              placeholder="Type your message..."
              autocomplete="off"
              class="flex-1 p-2 border border-accent rounded-l-xl focus:outline-none"
            />
            <button
              id="chat-send"
              class="p-2 bg-accent text-white rounded-r-xl"
            >
              Send
            </button>
          </div>
        </div>
        <script>
          const chatMessages = document.getElementById('chat-messages');
          const chatInput = document.getElementById('chat-input');
          const chatSend = document.getElementById('chat-send');

          function addMessage(text, sender = 'user') {
            const messageEl = document.createElement('div');
            messageEl.className = sender === 'user' ? 'text-right mb-2' : 'text-left mb-2';
            messageEl.textContent = text;
            chatMessages.appendChild(messageEl);
            chatMessages.scrollTop = chatMessages.scrollHeight;
          }

          function botResponse(userText) {
            // Gemini chatbot simple simulated response.
            return `Gemini Chatbot: You said "${userText}"`;
          }

          chatSend.addEventListener('click', () => {
            const text = chatInput.value.trim();
            if (!text) return;
            addMessage(text, 'user');
            chatInput.value = '';
            setTimeout(() => {
              const reply = botResponse(text);
              addMessage(reply, 'bot');
            }, 500);
          });

          chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') chatSend.click();
          });
        </script>
    </main>

    <!--* Script  -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script> -->
    
    
    <!--* Imports -->
    <script src="../node_modules/flyonui/flyonui.js"></script>
    <script src="../node_modules/lodash/lodash.js"></script>
    <script src="../node_modules/apexcharts/dist/apexcharts.js"></script>
    <script src="../node_modules/flatpickr/dist/flatpickr.js"></script>
    <script src="../node_modules/flyonui/dist/js/helper-apexcharts.js"></script>
    <script src="./script.js" type="module"></script>
  </body>
</html>
